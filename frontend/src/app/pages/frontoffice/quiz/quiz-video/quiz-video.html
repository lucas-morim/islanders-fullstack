<div class="container-quiz">
  <div *ngIf="loading()" class="alert alert-info">Carregando…</div>

  <div *ngIf="!loading() && !quiz()" class="card shadow-sm">
    <div class="card-body">
      <h4 class="mb-2">Sem quiz para este curso</h4>
      <p class="text-muted mb-0">Ainda não existe um quiz associado a este curso.</p>
    </div>
  </div>

  <div *ngIf="!loading() && quiz()" class="card shadow-sm">
    <div class="card-body">
      <h2 class="mb-1">{{ quiz()?.title }}</h2>
      <p class="text-muted mb-4" *ngIf="quiz()?.description">{{ quiz()?.description }}</p>

      <div *ngIf="safeEmbedUrl(); else noVideo" class="video-wrap">
        <iframe
          [src]="safeEmbedUrl()"
          title="Vídeo do quiz"
          frameborder="0"
          allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
          allowfullscreen>
        </iframe>
      </div>

      <ng-template #noVideo>
        <div class="alert alert-warning mb-3">
          Este quiz não tem vídeo configurado. Você pode iniciar diretamente.
        </div>
      </ng-template>

      <div class="d-flex justify-content-end gap-2 mt-3">
        <a class="btn btn-outline-secondary" [routerLink]="['/course', courseId]">Voltar</a>
        <button class="btn btn-primary isla-color-bg" (click)="startQuiz()">Começar quiz</button>
      </div>
    </div>
  </div>
</div>
